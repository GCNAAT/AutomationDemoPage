<!DOCTYPE html>
<html>
  <head>
    <title>HTML</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="//cdn.staticfile.org/codemirror/5.40.2/codemirror.min.css"
    />
    <!--[if lt IE 9]>
      <script src="//cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="app">
      <v-app id="inspire">
        <v-container fluid>
          <v-row>
            <v-col cols="12" md="12" class="blue white--text">
              <v-btn dark outlined onclick="submitTryit()">RENDER</v-btn>
            </v-col>
            <v-spacer></v-spacer>
           
          </v-row>

          <v-row>
            <v-col cols="12" md="6">
              <v-card>
                <textarea
                  name="sourceCode"
                  id="sourceCode"
                  label="Source Code"
                  :value="sourceCode"
                ></textarea>
              </v-card>
            </v-col>
            <v-col cols="12" md="6">
              <v-card id="renderedCode" width="100%"> </v-card>
            </v-col>
          </v-row>
        </v-container>
      </v-app>
    </div>

    <script src="//cdn.staticfile.org/codemirror/5.40.2/codemirror.min.js"></script>
    <script src="//cdn.staticfile.org/codemirror/5.40.2/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="//cdn.staticfile.org/codemirror/5.40.2/mode/css/css.min.js"></script>
    <script src="//cdn.staticfile.org/codemirror/5.40.2/mode/javascript/javascript.min.js"></script>
    <script src="//cdn.staticfile.org/codemirror/5.40.2/mode/xml/xml.min.js"></script>
    <script src="//cdn.staticfile.org/codemirror/5.40.2/addon/edit/closetag.min.js"></script>
    <script src="//cdn.staticfile.org/codemirror/5.40.2/addon/edit/closebrackets.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/babel-polyfill/dist/polyfill.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
    <script>
      new Vue({
        el: "#app",
        vuetify: new Vuetify(),

        data() {
          return {
            sourceCode: `
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>HTML</title>
</head>
<body>
  <section>
                <h1>id</h1>
                <div id="id-section">I have the id</div>
              </section>
              <section>
                <h1>name</h1>
                <div name="name-section">I have the name</div>
                <div name="name-section">I have the name too</div>
              </section>
              <section>
                <h1>class name</h1>
                <div class="class-section">I have the class name</div>
                <div class="class-section">I have the class name too</div>
              </section>
              <section>
                <h1>tag name</h1>
                <tag-name id="tag-name-section">I have the tag name</tag-name>
              </section>
              <section>
                <h1>css selector</h1>
                <div id="css-selector-section">I have the css selector</div>
              </section>
              <section>
                <h1>xpath</h1>
                <div id="xpath-section">I have the xpath</div>
              </section>
              <section>
                <h1>link text</h1>
                <div id="link-text-section">
                  <a href="#">I have the link text</a>
                </div>
              </section>
              <section>
                <h1>partial link text</h1>
                <div id="partial-link-text-section">
                  <a href="#">I have the partial link text</a>
                </div>
              </section>

</body>
</html>
            `,
          };
        },
        methods: {
          add: function (num) {
            if (this.radios === "apple") {
              this.appleCount++;
            } else {
              this.bananaCount++;
            }
          },
          replaceWithNewSource: function (code) {
            editor.getDoc().setValue(code);
            submitTryit();
          },
        },
      });
    </script>
    <script>
      var mixedMode = {
        name: "htmlmixed",
        scriptTypes: [
          { matches: /\/x-handlebars-template|\/x-mustache/i, mode: null },
          {
            matches: /(text|application)\/(x-)?vb(a|script)/i,
            mode: "vbscript",
          },
        ],
      };
      var editor = CodeMirror.fromTextArea(
        document.getElementById("sourceCode"),
        {
          mode: mixedMode,
          selectionPointer: true,
          lineNumbers: true,
          matchBrackets: true,
          indentUnit: 4,
          indentWithTabs: true,
        }
      );

      window.addEventListener("resize", autodivheight);

      var x = 0;
      function autodivheight() {
        var winHeight = 0;
        if (window.innerHeight) {
          winHeight = window.innerHeight;
        } else if (document.body && document.body.clientHeight) {
          winHeight = document.body.clientHeight;
        }
        if (document.documentElement && document.documentElement.clientHeight) {
          winHeight = document.documentElement.clientHeight;
        }
        height = winHeight * 0.875;
        editor.setSize("100%", height);
        document.getElementById("renderedResult").style.height = height + "px";
      }
      function resetCode() {
        var initCode =
          '<!DOCTYPE html>\n<html>\n<head>\n<meta charset="utf-8">\n<title>\u83dc\u9e1f\u6559\u7a0b(runoob.com)<\/title>\n<\/head>\n<body>\n\n<h1>\u6211\u7684\u7b2c\u4e00\u4e2a\u6807\u9898<\/h1>\n<p>\u6211\u7684\u7b2c\u4e00\u4e2a\u6bb5\u843d\u3002<\/p>\n\n<\/body>\n<\/html>';
        editor.getDoc().setValue(initCode);
        submitTryit();
      }
      function submitTryit() {
        var text = editor.getValue();
        var patternHtml = /<html[^>]*>((.|[\n\r])*)<\/html>/im;
        var patternHead = /<head[^>]*>((.|[\n\r])*)<\/head>/im;
        var array_matches_head = patternHead.exec(text);
        var patternBody = /<body[^>]*>((.|[\n\r])*)<\/body>/im;

        var array_matches_body = patternBody.exec(text);
        var basepath_flag = 1;
        var basepath = "";
        if (basepath_flag) {
          basepath = '<base href="//www.baidu.com/" target="_blank">';
        }
        if (array_matches_head) {
          text = text.replace("<head>", "<head>" + basepath);
        } else if (patternHtml) {
          text = text.replace("<html>", "<head>" + basepath + "</head>");
        } else if (array_matches_body) {
          text = text.replace("<body>", "<body>" + basepath);
        } else {
          text = basepath + text;
        }
        var ifr = document.createElement("iframe");
        ifr.setAttribute("frameborder", "0");
        ifr.setAttribute("id", "renderedResult");
        ifr.setAttribute("width","100%")
        ifr.setAttribute("height","100%")
        document.getElementById("renderedCode").innerHTML = "";
        document.getElementById("renderedCode").appendChild(ifr);

        var ifrw = ifr.contentWindow
          ? ifr.contentWindow
          : ifr.contentDocument.document
          ? ifr.contentDocument.document
          : ifr.contentDocument;
        ifrw.document.open();
        ifrw.document.write(text);
        ifrw.document.close();
        autodivheight();
      }
      submitTryit();
      autodivheight();
    </script>
  </body>
</html>
